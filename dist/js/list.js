"use strict";function asyncGeneratorStep(t,e,n,a,o,s,r){try{var i=t[s](r),c=i.value}catch(t){return void n(t)}i.done?e(c):Promise.resolve(c).then(a,o)}function _asyncToGenerator(i){return function(){var t=this,r=arguments;return new Promise(function(e,n){var a=i.apply(t,r);function o(t){asyncGeneratorStep(a,e,n,o,s,"next",t)}function s(t){asyncGeneratorStep(a,e,n,o,s,"throw",t)}o(void 0)})}}$(function(){var t=JSON.parse(window.localStorage.getItem("cart"));console.log(t);for(var e=0,n=0;n<t.length;n++)e+=+t[n].cart_number;console.log(e);var o,a=getCookie("nickname");a&&($(".loginbut").addClass("hide"),$(".register").addClass("hide"),$(".usernameNick").html("尊敬的    ".concat(a,"      会员您好")),$(".cartNumber").html("(".concat(e,")")),$(".CartNumber").html("".concat(e)));var s,r={cart_one_id:"all",cart_two_id:"all",cart_three_id:"all",current:1,pagesize:20,method:"ASC",method_type:"综合"};function i(){return(i=_asyncToGenerator(regeneratorRuntime.mark(function t(){var e,n,a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,$.get("../php/getoneMenue.php",null,null,"json");case 2:for(e=t.sent,n='<span class="active">全部</span>',a=0;a<e.length;a++)n+="\n        <span>".concat(e[a].cat_one_id,"</span>\n      ");$(".oneMenue").html(n);case 6:case"end":return t.stop()}},t)}))).apply(this,arguments)}function c(){return(c=_asyncToGenerator(regeneratorRuntime.mark(function t(){var e,n,a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,$.get("../php/gettwoMenue.php",r,null,"json");case 2:for(e=t.sent,n='<span class="active">全部</span>',a=0;a<e.length;a++)n+="\n      \n      <span>".concat(e[a].cat_two_id,"</span>\n      \n      ");$(".twoMenus").html(n);case 6:case"end":return t.stop()}},t)}))).apply(this,arguments)}function l(){return u.apply(this,arguments)}function u(){return(u=_asyncToGenerator(regeneratorRuntime.mark(function t(){var e,n,a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,$.get("../php/getThreeMenue.php",r,null,"json");case 2:for(e=t.sent,console.log(e),n='<span class="active">全部</span>',a=0;a<e.length;a++)n+="\n        <span>".concat(e[a].cat_three_id,"</span>  \n      ");$(".threeMenus").html(n);case 7:case"end":return t.stop()}},t)}))).apply(this,arguments)}function p(){return h.apply(this,arguments)}function h(){return(h=_asyncToGenerator(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,$.get("../php/getCount.php",r,null,"json");case 2:e=t.sent,$("#paginationOne").pagination({current:s,pageCount:e,count:4,prevContent:"上一页",nextContent:"下一页",homePage:"首页",endPage:"尾页",keepShowPN:!0,coping:!0,isHide:!0,callback:function(t){t=t.getCurrent();console.log(t),r.current=t,m(),d()}});case 5:case"end":return t.stop()}},t)}))).apply(this,arguments)}function d(){return g.apply(this,arguments)}function g(){return(g=_asyncToGenerator(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,$.get("../php/getCount.php",r,null,"json");case 2:e=t.sent,$(".paginationTwo").pagination({pageCount:e,count:0,prevContent:"上一页",nextContent:"下一页",keepShowPN:!0,current:r.current,isHide:!0,callback:function(t){t=t.getCurrent();console.log("内",t,"外",t,r),s=t,r.current=t,m(),p()}});case 4:case"end":return t.stop()}},t)}))).apply(this,arguments)}function m(){return _.apply(this,arguments)}function _(){return(_=_asyncToGenerator(regeneratorRuntime.mark(function t(){var e,n,a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,$.get("../php/getGoodsinfo.php",r,null,"json");case 2:for(e=t.sent,o=e,console.log(o),n="",a=0;a<e.length;a++)n+='\n      <div>\n      <div>\n        <img class="slideChangebig" data-id="'.concat(e[a].goods_id,'" src="').concat(e[a].goods_big_logo,'  " alt="" width=\'200px\' height="200px">\n      </div>\n      <span class="goDetails">').concat(e[a].goods_name,'</span>\n      <p>\n        <img class="slideChangesmall" data-id="').concat(e[a].goods_id,'" bigpicture="').concat(e[a].goods_big_logo,'" src="../images/11.jpg" alt="" width="50px" height="50px">\n        <img class="slideChangesmall" bigpicture="').concat(e[a].goods_big_logo,'" data-id="').concat(e[a].goods_id,'" src="').concat(e[a].goods_small_logo,'" alt="" width="50px" height="50px">\n        <img class="slideChangesmall" bigpicture="').concat(e[a].goods_big_logo,'" data-id="').concat(e[a].goods_id,'" src="../images/small.jpg" alt="" width="50px" height="50px">\n      </p>\n      <span>价格:').concat(e[a].goods_price,"￥</span><span>产品号:").concat(e[a].goods_id,'</span><br>\n      <button class="btn btn-default goCart" data-id="').concat(e[a].goods_id,'">加入购物车</button>\n      <a class="btn btn-default " href="./cart.html">去支付</a>\n    </div>\n      ');$(".list-panel").html(n),$(".goCart").on("click",function(){console.log($(this).data("id"));var n=$(this).data("id"),t=JSON.parse(window.localStorage.getItem("cart"))||[];console.log(t,o,n);var e,a=t.some(function(t,e){return t.goods_id==n});console.log(a,"\\\\",t),a?(e=t.filter(function(t){return t.goods_id==n}),console.log(e[0]),e[0].cart_number=+e[0].cart_number+1):((e=o.filter(function(t,e){return t.goods_id==n}))[0].cart_number=1,t.push(e[0])),console.log(t),window.localStorage.setItem("cart",JSON.stringify(t))});case 9:case"end":return t.stop()}},t)}))).apply(this,arguments)}!function(){i.apply(this,arguments)}(),$(".oneMenue").on("click","span",function(){$(this).addClass("active").css({color:"white"}).siblings().removeClass("active").css({color:"black"}),"全部"===$(this).html()?(r.cart_one_id="all",$(".twoMenus").html('<span class="active">全部</span>'),$(".threeMenus").html('<span class="active">全部</span>'),r.cart_two_id="all",r.cart_three_id="all"):(r.cart_one_id=$(this).html(),$("threeMenue").html('<span class="active">全部</span>'),r.cart_three_id="all",r.cart_two_id="all",function(){c.apply(this,arguments)}(),l()),console.log(r),p(),m(),d()}),$(".twoMenus").on("click","span",function(){$(this).addClass("active").css("color","white").siblings().removeClass("active").css("color","black"),"全部"===$(this).html()?(r.cart_two_id="all",r.cart_three_id="all",$(".threeMenus").html("<span class='active'>全部</span>")):(r.cart_two_id=$(this).html(),l()),p(),d(),m()}),$(".threeMenus").on("click","span",function(){$(this).addClass("active").css("color","white").siblings().removeClass("active").css("color","black"),"全部"===$(this).html()?r.cart_three_id="all":r.cart_three_id=$(this).html(),p(),d(),m()}),p(),d(),m(),$(".list-panel").on("mouseover",".slideChangesmall",function(){$(this).parent().siblings().first().children().attr("src",$(this).attr("src"))}),$(".list-panel").on("mouseout",".slideChangesmall",function(){$(this).parent().siblings().first().children().attr("src",$(this).attr("bigpicture"))}),$(".DEORASC").on("click","span",function(){$(this).addClass("active").css("color","white").siblings().removeClass("active").css("color","black"),"综合"===$(this).html()&&(r.method_type="综合",r.method=$(this).attr("data-method"),$(this).attr("data-method","ASC")),"价钱"===$(this).html()&&(r.method_type="价钱",r.method=$(this).attr("data-method"),$(this).attr("data-method","ASC")),m()}),$(".list-panel").on("click",".slideChangebig",function(){console.log("点击显示"),setCookie("goods_id",$(".list-panel .slideChangebig").attr("data-id")),window.location.href="./detail.html"}),$(".Sort").on("mouseover","li",function(){$(this).addClass("active").siblings().removeClass("active"),$(".SortMenue").stop().slideDown()}),$(".SortMenue").on("mouseout",function(){console.log(123123),$(this).removeClass("active"),$(".SortMenue").stop().slideUp()})});